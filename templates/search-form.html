<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="robots" content="nofollow" />
    <meta name="description" content="A search engine for the Seth material as dictated by Jane Roberts and transcribed by Robert F. Butts." />
    <link type="application/opensearchdescription+xml" rel="search" href="/static/sethcorpus.osdd" />
    <title>{% if query %}{{ query }} - {% endif %}Seth search engine</title>
    <script>
        function filterBook(abbr) {
            var abbr_l = abbr.toLowerCase();
            var q = document.getElementById('query').value;

            var book_re = new RegExp("\\bbook:" + abbr_l + "\\b");
            var not_book_re = new RegExp("\\bNOT\\s+book:" + abbr_l + "\\b");
            var any_book_re = new RegExp("\\bbook:\\w+");

            if (not_book_re.test(q)) {
                new_q = q.replace(not_book_re, "book:" + abbr_l)
            } else if (book_re.test(q)) {
                new_q = q.replace(book_re, "NOT book:" + abbr_l)
            } else if (any_book_re.test(q)) {
                new_q = q.replace(any_book_re, "book:" + abbr_l);
            } else {
                new_q = (q + " book:" + abbr_l + " ").trimLeft();
            }
            document.getElementById('query').value = new_q;
            document.getElementById('query').focus();
        }

        function toggleDisplay(self, id) {
            e = document.getElementById(id);
            if (e.style.display == 'none') {
                e.style.removeProperty('display');
                self.innerText = '▼';
            } else {
                e.style.display = 'none';
                self.innerText = '►';
            }
        }

        function findAncestor(el, cls) {
            while ((el = el.parentElement) && !el.classList.contains(cls));
            return el;
        }

        function addCitation(event) {
            if (!event.clipboardData)
                return;

            var selection = window.getSelection();
            var excerpts = findAncestor(selection.anchorNode, "excerpts");
            if (!excerpts)
                return;

            event.preventDefault();
            var heading = excerpts.parentNode.childNodes[3].innerHTML;

            var copyText = selection.toString().trim().replace(/  +/g, " ");
            if (copyText.indexOf("\n\n") == -1)
                copyText = '"' + copyText + '"';
            else
                copyText = '• "' + copyText.replace(/(\n\n)/g, '"$1• "') + '"\n';
            copyText += "\n—" + heading;
            event.clipboardData.setData('Text', copyText);
        }

        document.addEventListener('copy', addCitation);
    </script>
    <style>
        body {
            width: 65em;
            font-family: Verdana, sans-serif;
            font-size: 0.9em;
        }

        .hit {margin-bottom: 1.5em;}

        #pagination a, h1 a, .examples a, #books a, .omission {text-decoration: none;}
        h1 a {color: inherit;}
        #pagination {
            text-align: center;
            margin-bottom: 3em;
        }

        #query {width: 30em;}
        .omission {padding: 0 0.2em;}
        .hit-long {
            font-size: 0.9em;
            position: relative;
            left: 1.5em;
        }

        .book-link img {padding-left: 0.4em;}

        .book-link img, .kindle-link img {
            vertical-align: text-bottom;
            height: 1.5em;
        }

        .kindle-link img {padding-right: 0.4em;}
    </style>
</head>
<body>
<h1><a href="/">Seth search engine</a></h1>
<p><a href="http://sethtalks.com/t/seth-search-engine/513/">Forum post for updates</a></p>
<div><p>Example searches:</p>
<ul class="examples">
    <li>{{ 'beer OR wine'|example|safe }}</li>
    <li>{{ 'cat mouse'|example|safe }}</li>
    <li>{{ '"conscious mind"'|example|safe }}</li>
    <li>{{ 'exact:thankful'|example|safe }}</li>
    <li>{{ '"mind matter"~3'|example|safe }}</li>
    <li>{{ 'book:tes? exercise'|example|safe }}</li>
    <li>{{ 'common:"we are seth"'|example|safe }}</li>
    <li>{{ 'NOT book:wth exercise'|example|safe }}</li>
    <li>{{ 'heading:(essay 4) mind'|example|safe }}</li>
    <li>{{ '"five minutes" OR "ten minutes" book:(ss OR nopr OR tma)'|example|safe }}</li>
</ul>
<p>Leave out the search words for casual browsing:</p>
<ul class="examples">
    <li>{{ 'book:tma'|example|safe }}</li>
    <li>{{ 'heading:dreams'|example|safe }}</li>
    <li>{{ 'heading:"chapter 16"'|example|safe }}</li>
    <li>{{ 'session:636'|example|safe }}</li>
    <li>{{ 'session:(January 1977)'|example|safe }}</li>
    <li>{{ 'book:tma heading:*teen'|example|safe }}</li>
</ul>
</div>
<p><a href="http://whoosh.readthedocs.io/en/latest/querylang.html">Query language reference</a></p>
<p id="books">Current books: {{ books|map(attribute='abbr')|map('book_link')|join(', ')|safe }}</p>
<form method="post">
    <!--suppress SillyAssignmentJS -->
    <input {% if not query %}autofocus{% endif %} required type="text" id="query" name="query" title="query" onfocus="this.value = this.value" value="{{ query }}">
    <input type="submit" value="Search">
</form>
<p>The entire Seth collection, including audio, early and personal sessions, can be ordered from <a href="https://sethcenter.com/collections/books">sethcenter.com</a>.<br />
There are digital copies in the <a href="https://smile.amazon.com/s/rh=n%3A133140011%2Cp_27%3AJane+Roberts%2Cn%3A%21133141011%2Cn%3A154606011">Amazon kindle store</a>.</p>
<p>Book content copyright © Laurel Davies-Butts</p>
{% autoescape false %}
{{ result }}
<h3 id="pagination">{{  pagination }}</h3>
{% endautoescape %}
</body>
{% if scroll %}
    <script>
        document.getElementById('results').scrollIntoView();
    </script>
{% endif %}
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-96378100-1', 'auto');
  ga('send', 'pageview');
</script>
</html>