<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="robots" content="nofollow" />
    <meta name="description" content="A search engine for the Seth material as dictated by Jane Roberts and transcribed by Robert F. Butts." />
    {% if description %}<meta property="og:description" content="{{ description }}" />{% endif %}
    <link type="application/opensearchdescription+xml" rel="search" href="/static/sethcorpus.osdd" />
    <title>{% if plain_query %}{{ plain_query }} - {% endif %}Seth search engine</title>
    <script>
        function filterBook(abbr) {
            var abbr_l = abbr.toLowerCase();
            var q = document.getElementById('query').value;

            var book_re = new RegExp("\\bbook:" + abbr_l + "\\b\\??");
            var not_book_re = new RegExp("\\bNOT\\s+book:" + abbr_l + "\\b\\??");
            var any_book_re = new RegExp("\\bbook:\\w+\\??");

            if (not_book_re.test(q)) {
                new_q = q.replace(not_book_re, "book:" + abbr_l)
            } else if (book_re.test(q)) {
                new_q = q.replace(book_re, "NOT book:" + abbr_l)
            } else if (any_book_re.test(q)) {
                new_q = q.replace(any_book_re, "book:" + abbr_l);
            } else {
                new_q = (q + " book:" + abbr_l + " ").trimLeft();
            }
            document.getElementById('query').value = new_q;
            document.getElementById('query').focus();
        }

        function toggleDisplay(self, id) {
            e = document.getElementById(id);
            if (e.style.display == 'none') {
                e.style.removeProperty('display');
                self.innerText = '▼';
            } else {
                e.style.display = 'none';
                self.innerText = '►';
            }
        }

        function findAncestor(el, cls) {
            while ((el = el.parentElement) && !el.classList.contains(cls));
            return el;
        }

        function addCitation(event) {
            if (!event.clipboardData)
                return;

            var selection = window.getSelection();
            var excerpts = findAncestor(selection.anchorNode, "excerpts");
            if (!excerpts)
                return;

            event.preventDefault();
            var heading = excerpts.parentNode.childNodes[3].innerHTML;

            var copyText = selection.toString().trim().replace(/  +/g, " ");
            if (copyText.indexOf("\n\n") == -1)
                copyText = '"' + copyText + '"';
            else
                copyText = '• "' + copyText.replace(/(\n\n)/g, '"$1• "') + '"\n';
            copyText += "\n—" + heading;
            event.clipboardData.setData('Text', copyText);
        }

        document.addEventListener('copy', addCitation);
    </script>
    <style>
        body {
            width: 65em;
            font-family: Verdana, sans-serif;
            font-size: 0.9em;
        }
        input {vertical-align: bottom;}
        #search {padding: 0.5em 0;}
        #results {margin-top: 1.5em;}

        .hit {margin-bottom: 1.5em;}

        #pagination a, h1 a, .examples a, .books a, .omission {text-decoration: none;}
        h1 a {color: inherit;}
        #pagination {
            text-align: center;
            margin-bottom: 3em;
        }

        #query {width: 30em;}
        .omission {padding: 0 0.2em;}
        .hit-long {
            font-size: 0.9em;
            position: relative;
            left: 1.5em;
        }

        .book-link img {padding-left: 0.4em;}

        .book-link img, .kindle-link img {
            vertical-align: text-bottom;
            height: 1.5em;
        }

        .kindle-link img {padding-right: 0.4em;}
    </style>
</head>
<body>
<h1><a href="/">Seth search engine</a></h1>
<p><a href="http://sethtalks.com/t/seth-search-engine/513/">Forum post for updates</a></p>
<div><p>Example searches (hover for explanation):</p>
<ul class="examples">
    <li>{{ example('beer OR wine', 'either word')|safe }}</li>
    <li>{{ example('cat mouse', 'both words')|safe }}</li>
    <li>{{ example('"conscious mind"', 'the complete phrase')|safe }}</li>
    <li>{{ example('exact:thankful', 'the exact word (not stemmed to "thank")')|safe }}</li>
    <li>{{ example('"mind matter"~3', 'the complete phrase, but allows a distance between the words')|safe }}</li>
    <li>{{ example('book:tes? exercise', '"exercise" in every TES book')|safe }}</li>
    <li>{{ example('hospital date:"feb 1964"', '"hospital" in the given month')|safe }}</li>
    <li>{{ example('common:"we are seth"', 'keeps the common words "we" and "are"')|safe }}</li>
    <li>{{ example('NOT book:wth exercise', '"exercise" excluding the book Way Toward Health')|safe }}</li>
    <li>{{ example('heading:(essay 4) mind', 'both words in heading, "mind" in text')|safe }}</li>
    <li>{{ example('"five minutes" OR "ten minutes" book:(ss OR nopr OR tma)', 'phrases in multiple books')|safe }}</li>
</ul>
<p>Leave out the search words for casual browsing:</p>
<ul class="examples">
    <li>{{ example('book:tma', 'list of sessions in The Magical Approach')|safe }}</li>
    <li>{{ example('heading:dreams', 'any heading containing "dreams" in any book')|safe }}</li>
    <li>{{ example('heading:"chapter 16"', 'complete phrase in heading')|safe }}</li>
    <li>{{ example('session:636', 'number in session title')|safe }}</li>
    <li>{{ example('session:(esp notes)', 'both words in session title')|safe }}</li>
    <li>{{ example('date:[oct 1970 to dec 8 1970]', 'sessions in the given date range')|safe }}</li>
    <li>{{ example('book:tma heading:*teen', 'headings ending in "teen" in The Magical Approach')|safe }}</li>
</ul>
</div>
<p><a href="http://whoosh.readthedocs.io/en/latest/querylang.html">Query language reference</a></p>
<div id="search">
<p class="books">Individual books: {{ books|map('book_link')|join(', ')|safe }}</p>
<p class="books">Multiple volumes: {{ [
    ('UR?', "The \"Unknown\" Reality"),
    ('DEaVF?', "Dreams, \"Evolution\", and Value Fulfillment"),
    ('TES?', "The Early Sessions"),
    ('TPS?', "The Personal Sessions"),
    ('TECS?', "The Early Class Sessions"),
    ]|map('volumes_link')|join(', ')|safe }}</p>
{% if doc_count == 0 %}
<h2>Rebuilding index... please refresh in a few minutes.</h2>
{% endif %}
<form method="post">
    <!--suppress SillyAssignmentJS -->
    <input {% if not plain_query %}autofocus{% endif %} required type="text" id="query" name="query" title="query" onfocus="this.value = this.value" value="{{ plain_query }}">
    <input id="submit" type="submit" value="Search">

    <p>Hit order:
        <label><input type="radio" onclick="hitOrder(this);" name="hit-order" value="rel" required{% if hit_order not in ('asc', 'desc') %} checked{% endif %}> relevance</label>
        <label><input type="radio" onclick="hitOrder(this);" name="hit-order" value="asc"{% if hit_order == 'asc' %} checked{% endif %}> earliest</label>
        <label><input type="radio" onclick="hitOrder(this);" name="hit-order" value="desc"{% if hit_order == 'desc' %} checked{% endif %}> latest</label>
    </p>
    <p>Excerpt order:
        <label><input type="radio" onclick="excerptOrder(this);" name="excerpt-order" id="excerpt-order-rel" value="rel" required{% if excerpt_order != 'pos' %} checked{% endif %}> relevance</label>
        <label><input type="radio" onclick="excerptOrder(this);" name="excerpt-order" id="excerpt-order-pos" value="pos"{% if excerpt_order == 'pos' %} checked{% endif %}> position</label>
    <script>
    {% if hit_order is none and excerpt_order is none %}
    var autoExcerptOrder = true;
    document.getElementById('excerpt-order-rel').style.opacity = 0.5;
    {% else %}
    var autoExcerptOrder = false;
    {% endif %}

    function hitOrder(radio) {
        if (autoExcerptOrder) {
            if (['asc', 'desc'].includes(radio.value)) {
                document.getElementById('excerpt-order-rel').style.opacity = 1.0;
                document.getElementById('excerpt-order-pos').style.opacity = 0.5;
                document.getElementById('excerpt-order-pos').checked = true;
            } else {
                document.getElementById('excerpt-order-pos').style.opacity = 1.0;
                document.getElementById('excerpt-order-rel').style.opacity = 0.5;
                document.getElementById('excerpt-order-rel').checked = true;
            }
        }
    }

    function excerptOrder(radio) {
        if (autoExcerptOrder) {
            autoExcerptOrder = false;
            document.getElementById('excerpt-order-rel').style.opacity = 1.0;
            document.getElementById('excerpt-order-pos').style.opacity = 1.0;
        }
    }
    </script>
    </p>
</form>
</div>
<p>The entire Seth collection, including audio, early and personal sessions, can be ordered from <a href="https://sethcenter.com/collections/books">sethcenter.com</a>.<br />
There are digital copies in the <a href="https://smile.amazon.com/s/rh=n%3A133140011%2Cp_27%3AJane+Roberts%2Cn%3A%21133141011%2Cn%3A154606011">Amazon kindle store</a>.</p>
<p>Book content copyright © Laurel Davies-Butts</p>
{% autoescape false %}
{{ results }}
<h3 id="pagination">{{  pagination }}</h3>
{% endautoescape %}
</body>
{% if scroll %}
    <script>
        document.getElementById('{{ scroll }}').scrollIntoView();
    </script>
{% endif %}
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-96378100-1', 'auto');
  ga('send', 'pageview');
</script>
</html>